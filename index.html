<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Word Realms</title>

  <!-- Meta & PWA Enhancements -->
  <meta name="theme-color" content="#1a1a1a" />
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="./style.css" />

  <!-- Preload critical resources (optional) -->
  <!-- <link rel="preload" href="main.js" as="script" /> -->
</head>

<body>
  <header>
    <h1>Word Realms</h1>
    <nav role="tablist" aria-label="Game Modes">
      <button id="navRegularGame" role="tab" aria-controls="regularGameArea">Regular</button>
      <button id="navWordRelic" role="tab" aria-controls="wordRelicArea">Word Relic</button>
      <button id="navWordSafari" role="tab" aria-controls="wordSafariArea">Word Safari</button>
      <button id="navDiceChallenge" role="tab" aria-controls="diceChallengeArea">Dice Challenge</button>
      <button id="navWordAtlas" role="tab" aria-controls="wordAtlasArea">Word Atlas</button>
    </nav>
  </header>

  <main>
    <section id="regularGameArea" class="game-section hidden" aria-hidden="true">
      <h2>Regular Game</h2>
      <!-- Regular game content here -->
    </section>

    <section id="wordRelicArea" class="game-section hidden" aria-hidden="true">
      <h2>Word Relic</h2>
      <p id="relicClue"></p>

      <div id="categoryGuessArea" class="hidden" aria-hidden="true">
        <fieldset>
          <legend>Select Category:</legend>
          <button>Name</button>
          <button>Place</button>
          <button>Animal</button>
          <button>Thing</button>
        </fieldset>
      </div>

      <p id="selectedCategory"></p>
      <label for="wordGuess">Your word guess:</label>
      <input type="text" id="wordGuess" autocomplete="off" />

      <button id="restoreRelicBtn" disabled>Restore Relic</button>
      <div id="relicInfo" class="hidden" aria-hidden="true"></div>
    </section>

    <section id="wordSafariArea" class="game-section hidden" aria-hidden="true">
      <h2>Word Safari</h2>
      <p id="currentSafariCategory"></p>

      <label for="wordSafariInput">Enter a word:</label>
      <input type="text" id="wordSafariInput" autocomplete="off" />
      <button id="submitSafariWordBtn">Submit</button>

      <ul id="submittedSafariWords" aria-live="polite"></ul>
    </section>

    <section id="diceChallengeArea" class="game-section hidden" aria-hidden="true">
      <h2>Dice Challenge</h2>
      <p id="dicePrompt"></p>

      <label for="diceAnswerInput">Your answer:</label>
      <input type="text" id="diceAnswerInput" autocomplete="off" />
      <button id="submitDiceAnswerBtn">Submit</button>
    </section>

    <section id="wordAtlasArea" class="game-section hidden" aria-hidden="true">
      <h2>Word Atlas</h2>
      <!-- Word Atlas UI -->
    </section>
  </main>

  <footer>
    <button id="findRelicBtn" data-probe-click="findRelic">Find Word Relic</button>
    <button id="startSafariBtn" data-probe-click="startSafari">Start Safari</button>
    <button id="rollDiceChallengeBtn" data-probe-click="rollDice">Roll Dice</button>
    <button id="startAtlasBtn" data-probe-click="startAtlas">Start Word Atlas</button>
  </footer>

  <!-- Main App Script as Module -->
  <script type="module" src="./main.js"></script>

  <!-- Fallback for Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js')
        .then(reg => console.log('SW registered:', reg.scope))
        .catch(err => console.error('SW registration failed:', err));
    }
  </script>
  <script type="module" src="scripts/main.js"></script>
</body>
</html>
